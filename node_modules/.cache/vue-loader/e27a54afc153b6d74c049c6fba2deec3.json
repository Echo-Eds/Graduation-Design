{"remainingRequest":"D:\\SpringBoot\\demoSpringBootVue\\springbootvue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\SpringBoot\\demoSpringBootVue\\springbootvue\\src\\views\\consult\\ContentPage.vue?vue&type=style&index=0&id=07bbec3b&scoped=true&lang=css","dependencies":[{"path":"D:\\SpringBoot\\demoSpringBootVue\\springbootvue\\src\\views\\consult\\ContentPage.vue","mtime":1652507811766},{"path":"D:\\SpringBoot\\demoSpringBootVue\\springbootvue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1643167393479},{"path":"D:\\SpringBoot\\demoSpringBootVue\\springbootvue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1643167394865},{"path":"D:\\SpringBoot\\demoSpringBootVue\\springbootvue\\node_modules\\postcss-loader\\src\\index.js","mtime":1643167394154},{"path":"D:\\SpringBoot\\demoSpringBootVue\\springbootvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643167392997},{"path":"D:\\SpringBoot\\demoSpringBootVue\\springbootvue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1643167394348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouYm9keSB7DQogIHdpZHRoOiAxMDAlOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoudGl0bGUgew0KICB3aWR0aDogMTAwJTsNCn0NCi50aXRsZSBzcGFuIHsNCiAgZm9udC1zaXplOiAzZW07DQogIGZvbnQtZmFtaWx5OiBHZW9yZ2lhLCAiVGltZXMgTmV3IFJvbWFuIiwgVGltZXMsIHNlcmlmOw0KfQ0KLmVsLWRpdmlkZXItLWhvcml6b250YWwgew0KICBtYXJnaW46IDEwcHggMDsNCn0NCg=="},{"version":3,"sources":["D:\\SpringBoot\\demoSpringBootVue\\springbootvue\\src\\views\\consult\\ContentPage.vue"],"names":[],"mappings":";AAiRA,CAAC,CAAC,CAAC,CAAC,EAAE;EACJ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACb;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACvD;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;AAChB","file":"D:/SpringBoot/demoSpringBootVue/springbootvue/src/views/consult/ContentPage.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <SysHeader></SysHeader>\r\n  <IndexCarousel></IndexCarousel>\r\n  <br />\r\n  <el-row>\r\n    <el-col :span=\"4\"></el-col>\r\n    <el-col :span=\"16\">\r\n      <el-page-header content=\"求助详情\" @click=\"goBack\" />\r\n    </el-col>\r\n    <el-col :span=\"4\"></el-col>\r\n  </el-row>\r\n  <el-row>\r\n    <el-col :span=\"4\"></el-col>\r\n    <el-col :span=\"16\">\r\n      <el-divider></el-divider>\r\n      <div class=\"body\">\r\n        <div class=\"title\">\r\n          <span>{{ title }}</span>\r\n        </div>\r\n\r\n        <el-divider\r\n          style=\"width: 70%; position: relative; left: 15%\"\r\n          border-style=\"dashed\"\r\n          ><el-icon><star-filled /></el-icon\r\n        ></el-divider>\r\n\r\n        <div class=\"info\">\r\n          <span>提问人:</span>\r\n          &nbsp;\r\n          <span>{{ author }}</span>\r\n          &nbsp;&nbsp;&nbsp;\r\n          <span>提问时间:</span>\r\n          &nbsp;\r\n          <span>{{ time }}</span>\r\n        </div>\r\n        <br />\r\n      </div>\r\n      <el-card>\r\n        <div v-html=\"content\"></div>\r\n      </el-card>\r\n\r\n      <!-- 下面是底下的收藏 转发 模块 -->\r\n      <br />\r\n      <el-row>\r\n        <el-col :span=\"20\">\r\n          <el-button type=\"primary\" round style=\"width: 100px\" @click=\"handleOpen\"\r\n            >回复</el-button\r\n          >\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"plain\" round @click=\"collect\"\r\n            ><el-icon><collection-tag /></el-icon>&nbsp;收藏</el-button\r\n          >\r\n          <el-button type=\"plain\" round @click=\"forward\"\r\n            ><el-icon><share /></el-icon>&nbsp;分享</el-button\r\n          >\r\n        </el-col>\r\n      </el-row>\r\n      <el-divider></el-divider>\r\n      <!-- 回复信息部分 -->\r\n      <span>回复信息：</span>\r\n      <br />\r\n      <br />\r\n      <el-card v-for=\"item in RepList\" :key=\"item\" style=\"margin: 5px 0\">\r\n        <div>\r\n          <el-row>\r\n            <el-col :span=\"5\">\r\n              <span>{{ item.professorName }}</span>\r\n              &nbsp;\r\n              <span>{{ item.time }}</span>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n        <el-divider style=\"width: 35%\"></el-divider>\r\n        <div>\r\n          <span>{{ item.content }}</span>\r\n        </div>\r\n      </el-card>\r\n    </el-col>\r\n    <el-col :span=\"4\"></el-col>\r\n  </el-row>\r\n  <el-dialog v-model=\"dialogVisible\" title=\"请复制当前链接以分享\" width=\"50%\" draggable>\r\n    <span>{{ currentURL }}</span>\r\n  </el-dialog>\r\n  <el-dialog v-model=\"dialogVisible1\" title=\"请输入回复内容\" width=\"35%\">\r\n    <el-form v-model=\"form\">\r\n      <el-form-item label=\"回复信息：\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          autosize\r\n          placeholder=\"请输入你要回复的内容\"\r\n          v-model=\"form.content\"\r\n        ></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible1 = false\" round>Cancel</el-button>\r\n        <el-button type=\"primary\" @click=\"upload\" round>提交</el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n  <div style=\"width: 100%; height: 100px\"></div>\r\n  <SysBottom></SysBottom>\r\n</template>\r\n\r\n<script>\r\nimport SysHeader from \"../../components/sys/SysHeader.vue\";\r\nimport IndexCarousel from \"../../components/sys/IndexCarousel.vue\";\r\nimport SysBottom from \"../../components/sys/SysBottom.vue\";\r\nimport request from \"@/utils/request.js\";\r\n\r\nlet UID;\r\nexport default {\r\n  name: \"\",\r\n  components: {\r\n    SysHeader,\r\n    IndexCarousel,\r\n    SysBottom,\r\n  },\r\n  data() {\r\n    return {\r\n      addCollForm: {},\r\n      currentURL: \"\",\r\n      Id: \"\",\r\n      title: \"\",\r\n      author: \"\",\r\n      time: \"\",\r\n      content: \"\",\r\n      dialogVisible: false,\r\n      dialogVisible1: false,\r\n      //回复部分\r\n      form: {},\r\n      RepList: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    //异步加载\r\n      this.$nextTick(() => {\r\n        // console.log(this.$route);\r\n        this.Id = this.$route.query.id;\r\n        request\r\n          .get(\"/consult/content\", {\r\n            params: {\r\n              titleId: this.Id,\r\n            },\r\n          })\r\n          .then((res) => {\r\n            // console.log(res);\r\n            this.title = res.data.title;\r\n            this.time = res.data.time;\r\n            this.content = res.data.content;\r\n\r\n            // 吧结果的id给新的请求做参数\r\n            request\r\n              .get(\"/consult/getAuthorName\", {\r\n                params: {\r\n                  userId: res.data.userId,\r\n                },\r\n              })\r\n              .then((result) => {\r\n                this.author = result.data;\r\n              });\r\n          });\r\n        //获取回复信息\r\n        request\r\n          .get(\"/consultReply/getRep\", {\r\n            params: {\r\n              questionID: this.Id,\r\n            },\r\n          })\r\n          .then((res) => {\r\n            console.log(res);\r\n            let professorNUM = res.data.length;\r\n            for (let flag = 0; flag < professorNUM; flag++) {\r\n              this.RepList.push(res?.data[flag]);\r\n            }\r\n          });\r\n      });\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.back();\r\n    },\r\n    forward() {\r\n      this.dialogVisible = true;\r\n      this.currentURL = \"http://localhost:9876/\" + this.$route.fullPath;\r\n      console.log(this.currentURL);\r\n    },\r\n    /**\r\n     * 添加到我的收藏\r\n     */\r\n    collect() {\r\n      let USER = JSON.parse(sessionStorage.getItem(\"user\"));\r\n      UID = USER.id;\r\n      this.addCollForm.userId = UID;\r\n      this.addCollForm.titleId = this.Id;\r\n      request.post(\"/myCollection/addToMyCollection\", this.addCollForm).then((res) => {\r\n        console.log(res);\r\n        if (res.code == \"0\") {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"收藏成功\",\r\n            showClose: true,\r\n            center: true,\r\n          });\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.msg,\r\n            showClose: true,\r\n            center: true,\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    handleOpen() {\r\n      let str = sessionStorage.getItem(\"user\" || \"{}\");\r\n      let str1 = this.$cookies.get(\"professor\");\r\n      if (str == null && str1 == null) {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请先登录后再回复\",\r\n          showClose: true,\r\n          center: true,\r\n        });\r\n      }\r\n      if (str == null && str1 != null) {\r\n        this.dialogVisible1 = true;\r\n      }\r\n      if (str != null && str1 == null) {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"普通用户不能回复！\",\r\n          showClose: true,\r\n          center: true,\r\n        });\r\n      }\r\n    },\r\n    upload() {\r\n      let str1 = this.$cookies.get(\"professor\");\r\n      let date = new Date();\r\n      this.form.professorId = str1.id;\r\n      this.form.questionId = this.Id;\r\n      this.form.time = date;\r\n      this.form.professorName = str1.name;\r\n      request.post(\"/consultReply/addRep\", this.form).then((res) => {\r\n        console.log(res);\r\n        if (res.code == \"0\") {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"回复成功！\",\r\n            showClose: true,\r\n            center: true,\r\n          });\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.msg,\r\n            showClose: true,\r\n            center: true,\r\n          });\r\n        }\r\n      });\r\n      this.dialogVisible1 = false;\r\n      \r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.body {\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n.title {\r\n  width: 100%;\r\n}\r\n.title span {\r\n  font-size: 3em;\r\n  font-family: Georgia, \"Times New Roman\", Times, serif;\r\n}\r\n.el-divider--horizontal {\r\n  margin: 10px 0;\r\n}\r\n</style>\r\n"]}]}